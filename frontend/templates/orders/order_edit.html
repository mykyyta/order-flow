{% extends "base_form_page.html" %}
{% load static %}

{% block title %}Підправити замовлення #{{ order.id }}{% endblock %}

{% block form_content %}
<form method="post" action="{% url 'order_edit' order.id %}">
    {% csrf_token %}

    <div class="space-y-4">
        {% include "partials/form_field.html" with field=form.product label="Модель" %}
        {% include "partials/form_field.html" with field=form.primary_material_color label="Основний колір" %}
        {% if form.primary_material_color.field.disabled %}
        <p class="text-xs text-slate-500">
            Колір заблоковано, бо у моделі змінився основний матеріал. Можна редагувати інші поля.
        </p>
        {% endif %}

        <div class="flex flex-wrap items-center gap-x-6 gap-y-2">
            {% include "partials/form_checkbox_option.html" with field=form.is_etsy label="Etsy" %}
            {% include "partials/form_checkbox_option.html" with field=form.is_embroidery label="Вишивка" %}
            {% include "partials/form_checkbox_option.html" with field=form.is_urgent label="Терміново" %}
            {% if form.is_etsy.errors or form.is_embroidery.errors or form.is_urgent.errors %}
            <p class="form-error w-full">{{ form.is_etsy.errors.0|default:form.is_embroidery.errors.0|default:form.is_urgent.errors.0 }}</p>
            {% endif %}
        </div>

        {% include "partials/form_field.html" with field=form.comment %}

        <div class="flex flex-wrap items-center gap-3 pt-1">
            <button type="submit" class="btn-primary">Зберегти</button>
            <a href="{% url 'order_detail' order.id %}" class="btn-secondary">Скасувати</a>
        </div>
    </div>
</form>
{% endblock %}

{% comment %}
Back link is rendered above the card by base_form_page.html via back_url/back_label.
{% endcomment %}
