{% extends "base_form_page.html" %}

{% block form_content %}
<form method="post" class="space-y-4" x-data="{% if form.receive_all.value == False %}{ all: false }{% else %}{ all: true }{% endif %}">
    {% csrf_token %}

    <div class="card">
        <div class="p-4">
            <div class="text-sm font-medium text-slate-900">
                {{ line.material.name }}{% if line.material_color %}<span class="text-slate-400">·</span> {{ line.material_color.name }}{% endif %}
            </div>
            <div class="mt-1 text-xs text-slate-500">
                Залишилось:
                <span class="font-semibold tabular-nums text-slate-700">{{ line.remaining_quantity }}</span>
                {{ line.unit }}
            </div>
        </div>
    </div>

    <div class="card">
        <div class="p-4 space-y-3">
            <div class="flex items-center justify-between gap-3">
                <label class="inline-flex items-center gap-2 text-sm text-slate-800 select-none">
                    <input
                        type="checkbox"
                        name="{{ form.receive_all.html_name }}"
                        class="form-checkbox"
                        x-model="all"
                        {% if form.receive_all.value != False %}checked{% endif %}
                    >
                    <span>Прийняти все</span>
                </label>

                <button type="submit" class="btn-primary h-10 px-4 whitespace-nowrap">
                    <span x-text="all ? 'Прийняти все' : 'Прийняти'">Прийняти все</span>
                </button>
            </div>

            <div x-show="!all" x-cloak class="pt-1">
                {% include "partials/form_field.html" with field=form.quantity label="Кількість" show_optional_hint=False %}
            </div>

            <details class="group">
                <summary class="cursor-pointer text-sm text-slate-700 hover:text-slate-900">
                    Коментар
                </summary>
                <div class="mt-3">
                    {% include "partials/form_field.html" with field=form.notes label="" show_optional_hint=False %}
                </div>
            </details>
        </div>
    </div>
</form>
{% endblock %}
