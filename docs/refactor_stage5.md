# Рефакторинг: Етап 5 (2026-02-07)

## Ціль етапу
Формалізувати правила переходів статусів у доменному шарі та підключити їх у сервісах.

## План етапу
1. Описати дозволені переходи між статусами.
2. Додати перевірку переходів у `OrderService`.
3. Покрити правила тестами.

## Реалізація (виконано)
- Додано доменні правила переходів:
  - `orders/domain/transitions.py`.
- Валідація переходів у `OrderService`:
  - `orders/application/order_service.py`.
- Додано тести на заборонені переходи:
  - `orders/tests.py`.

## Примітки
- Переходи з `finished` тепер заборонені (can’t move back). Якщо бізнес вимагає зворотні переходи — правила треба переглянути.

## Наступні кроки
- Оптимізація читання: `Order.current_status` + міграція.
- Тести на правила переходів у інтеграційному середовищі.
